{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Callback=()=>{const[token,setToken]=useState(\"\");useEffect(()=>{const hash=window.location.hash;let tokenFromLocalStorage=window.localStorage.getItem(\"token\");if(!tokenFromLocalStorage&&hash){const tokenFromHash=hash.substring(1).split(\"&\").find(elem=>elem.startsWith(\"access_token\"));if(tokenFromHash){tokenFromLocalStorage=tokenFromHash.split(\"=\")[1];window.localStorage.setItem(\"token\",tokenFromLocalStorage);}}setToken(tokenFromLocalStorage);},[token]);// useEffect to display personal user information on the web page\nuseEffect(()=>{const token=window.localStorage.getItem(\"token\");const base_url=\"https://api.spotify.com/v1/me\";const header_payload={Authorization:`Bearer ${token}`};axios.get(`${base_url}`,{headers:header_payload}).then(res=>{console.log(res.data);}).catch(error=>{console.log(`Error occured while fetching user info: ${error}`);});});const handleLogOut=()=>{setToken(\"\");window.localStorage.removeItem(\"token\");window.location.href=\"/\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"This is the callback page.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"spotify-btn\",onClick:handleLogOut,children:\"Log out from Spotify\"})]});};export default Callback;","map":{"version":3,"names":["useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Callback","token","setToken","hash","window","location","tokenFromLocalStorage","localStorage","getItem","tokenFromHash","substring","split","find","elem","startsWith","setItem","base_url","header_payload","Authorization","get","headers","then","res","console","log","data","catch","error","handleLogOut","removeItem","href","className","children","onClick"],"sources":["/Users/godfather/Desktop/TUS School Stuff/spotify_web_api_project/frontend/src/pages/Callback.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nconst Callback = () => {\n  const [token, setToken] = useState(\"\");\n  useEffect(() => {\n    const hash = window.location.hash;\n    let tokenFromLocalStorage = window.localStorage.getItem(\"token\") as string;\n\n    if (!tokenFromLocalStorage && hash) {\n      const tokenFromHash = hash\n        .substring(1)\n        .split(\"&\")\n        .find((elem) => elem.startsWith(\"access_token\"));\n\n      if (tokenFromHash) {\n        tokenFromLocalStorage = tokenFromHash.split(\"=\")[1];\n        window.localStorage.setItem(\"token\", tokenFromLocalStorage);\n      }\n    }\n\n    setToken(tokenFromLocalStorage);\n  }, [token]);\n\n  // useEffect to display personal user information on the web page\n  useEffect(() => {\n    const token = window.localStorage.getItem(\"token\");\n    const base_url = \"https://api.spotify.com/v1/me\";\n    const header_payload = {\n      Authorization: `Bearer ${token}`,\n    };\n    axios\n      .get(`${base_url}`, { headers: header_payload })\n      .then((res) => {\n        console.log(res.data);\n      })\n      .catch((error) => {\n        console.log(`Error occured while fetching user info: ${error}`);\n      });\n  });\n\n  const handleLogOut = () => {\n    setToken(\"\");\n    window.localStorage.removeItem(\"token\");\n    window.location.href = \"/\";\n  };\n  return (\n    <div className=\"App\">\n      <h1>This is the callback page.</h1>\n      <button className=\"spotify-btn\" onClick={handleLogOut}>\n        Log out from Spotify\n      </button>\n    </div>\n  );\n};\n\nexport default Callback;\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CACtCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,IAAI,CAAGC,MAAM,CAACC,QAAQ,CAACF,IAAI,CACjC,GAAI,CAAAG,qBAAqB,CAAGF,MAAM,CAACG,YAAY,CAACC,OAAO,CAAC,OAAO,CAAW,CAE1E,GAAI,CAACF,qBAAqB,EAAIH,IAAI,CAAE,CAClC,KAAM,CAAAM,aAAa,CAAGN,IAAI,CACvBO,SAAS,CAAC,CAAC,CAAC,CACZC,KAAK,CAAC,GAAG,CAAC,CACVC,IAAI,CAAEC,IAAI,EAAKA,IAAI,CAACC,UAAU,CAAC,cAAc,CAAC,CAAC,CAElD,GAAIL,aAAa,CAAE,CACjBH,qBAAqB,CAAGG,aAAa,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACnDP,MAAM,CAACG,YAAY,CAACQ,OAAO,CAAC,OAAO,CAAET,qBAAqB,CAAC,CAC7D,CACF,CAEAJ,QAAQ,CAACI,qBAAqB,CAAC,CACjC,CAAC,CAAE,CAACL,KAAK,CAAC,CAAC,CAEX;AACAR,SAAS,CAAC,IAAM,CACd,KAAM,CAAAQ,KAAK,CAAGG,MAAM,CAACG,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAClD,KAAM,CAAAQ,QAAQ,CAAG,+BAA+B,CAChD,KAAM,CAAAC,cAAc,CAAG,CACrBC,aAAa,CAAE,UAAUjB,KAAK,EAChC,CAAC,CACDN,KAAK,CACFwB,GAAG,CAAC,GAAGH,QAAQ,EAAE,CAAE,CAAEI,OAAO,CAAEH,cAAe,CAAC,CAAC,CAC/CI,IAAI,CAAEC,GAAG,EAAK,CACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAAC,CACvB,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAK,CAChBJ,OAAO,CAACC,GAAG,CAAC,2CAA2CG,KAAK,EAAE,CAAC,CACjE,CAAC,CAAC,CACN,CAAC,CAAC,CAEF,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB1B,QAAQ,CAAC,EAAE,CAAC,CACZE,MAAM,CAACG,YAAY,CAACsB,UAAU,CAAC,OAAO,CAAC,CACvCzB,MAAM,CAACC,QAAQ,CAACyB,IAAI,CAAG,GAAG,CAC5B,CAAC,CACD,mBACE/B,KAAA,QAAKgC,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBnC,IAAA,OAAAmC,QAAA,CAAI,4BAA0B,CAAI,CAAC,cACnCnC,IAAA,WAAQkC,SAAS,CAAC,aAAa,CAACE,OAAO,CAAEL,YAAa,CAAAI,QAAA,CAAC,sBAEvD,CAAQ,CAAC,EACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}